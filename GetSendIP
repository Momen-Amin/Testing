#!/bin/bash

# ==============================
#   Server IP Reporter Script
# ==============================

# Server info
HOSTNAME=$(hostname)
DATE=$(date +"%Y-%m-%d %H:%M:%S")

# Retrieve the Public IP address
public_ip_address=$(curl -s https://api.ipify.org)

# Retrieve ALL Local (Private) IP addresses (one per line)
local_ip_addresses=$(hostname -I | tr ' ' '\n')

# Prepare terminal output
echo
echo "=============================="
echo " Server IP Information"
echo "=============================="
echo "Hostname: $HOSTNAME"
echo "Date: $DATE"
echo
echo "Public IP: $public_ip_address"
echo
echo "Private IPs:"
echo "$local_ip_addresses"
echo "=============================="
echo

# Email configuration
recipient="momen.amin@hotmail.com"
subject="[$HOSTNAME] Server IP Report"

# Email body
email_body="Server Hostname: ${HOSTNAME}
Date: ${DATE}

Public IP Address:
${public_ip_address}

Private IP Addresses:
${local_ip_addresses}
"

# Send the email
echo -e "$email_body" | mail -s "$subject" "$recipient"
